
namespace //example.aalgola.org/syntax/highlight/

import //aalgola.org/core/character/Ascii

âŸ¦publicâŸ§
âŸ¦order(RANDOM, seed: (4B2Aâ€¯3346)â‚â‚†)âŸ§
test SyntaxHighlightTest âŒ
	Demonstrates how Aalgola works with syntax highlighting.
â is

	âŸ¦publicâŸ§
	test â€œtime and date literalsâ€ is
		time :â† 12:34
		instant :â† 12:34:56.123456789
		assert time = 12:34:00
		assert instant > time

		date :â† 2025-04-24
		time_and_date :â† 2025-04-24T12:34

		day_in_year :â† 2025-001
		assert day_in_year = 2025-01-01

		day_in_week :â† 2025-W01-6
		assert day_in_week = 2025-01-04
	end

	test â€œrational number literalsâ€ is
		fraction_set :â† {Â½, â…“, â…”, Â¼, Â¾, â…•, â…–, â…—, â…˜, â…™, â…š, â…›, â…œ, â…, â…}
		assert Â¹â„â‚‚ âˆˆ fraction_set
		assert â»Â¹Â²Â³â„â‚„â‚…â‚† = Â¹Â²Â³â„â‚‹â‚„â‚…â‚†
		assert 2Â¹â„â‚‚ = âµâ„â‚‚
		assert 0.022Ì…7Ì… = Â¹â„â‚„â‚„
		assert âˆ’Â¹â„â‚…â‚„ = âˆ’0.01Ì…8Ì…5Ì…
	end

	test â€œdecimal number literalsâ€ is
		above :â† 12.34Ì‡
		below :â† 12.34Ì£
		assert below &lt; 12.34 &lt; above

		câ‚€ := 299â€¯792â€¯45ğŸ– ôŠ€¦/ôŠ€¬
		positive :â† +123.456
		negative :â† âˆ’123.456

		NôŠˆ := 6.022â€¯140â€¯7ğŸ” Ã— 10Â²Â³ ôŠ€¦ôŠ€¨ôŠ€¥â»Â¹
		Î¼â‚€ := 1.256â€¯637â€¯061â€¯27â€¯(20) Ã— 10â»â¶ ôŠ€â‹…ôŠ€€â»Â²

		â€Œconstâ‚ :â† 123.456ğŸ• Ã— 10Â²Â³
		â€Œconstâ‚‚ :â† 456ğŸ• Ã— 10Â²Â³
		â€Œconstâ‚ƒ :â† 456 Ã— 10Â²Â³
		â€Œconstâ‚„ :â† 123.456 Ã— 10â»Â²Â³

		ôŠ„¹ := 3.14159â€¯26535â€¯89793â€¯23846â€¯26433...
		ôŠ„¹â€² :â† 355 / 113
		assert âˆ£ôŠ„¹ âˆ’ ôŠ„¹â€²âˆ£ â‰¤ 10â»â·
	end

	test â€œinteger number literalsâ€ is
		large :â† +10Â¹â°â°
		assert large = 2 Ã— 10â´â¹ â‹…  5 Ã— 10âµâ°
	end

	test â€œğ‘-adic number literalsâ€ is
		Î¼â‚€ := (01â€¦01)â‚‚
		tâ‚ :â† Tetra(Î¼â‚€)
		assert tâ‚ = (01010101â€¯01010101â€¯01010101â€¯01010101)â‚‚
		assert tâ‚ = (5â€¦5)â‚â‚†

		all_bits :â† (â€¦1)â‚‚
		tâ‚‚ :â† Tetra(all_bits)
		assert tâ‚‚ = âˆ’1

		maskâ‚ :â† (CAFEâ€¯BABE)â‚â‚†
		maskâ‚‚ :â† (1234â€¯5678)â‚â‚†
		assert maskâ‚ âŠ™ maskâ‚‚ = (DAFEâ€¯FEFE)â‚â‚†
	end

	test â€œdegree literalsâ€ is
		Î±â‚ :â† 12Â°â€¯34â€²â€¯56â€³
		Î±â‚‚ :â† 12Â°â€¯34.56â€²
		assert Î±â‚ > Î±â‚‚
	end

	test â€œposition literalsâ€ is
		position :â† 12Â°â€¯34â€²â€¯56.789â€³ N 012Â°â€¯34â€²â€¯56.789â€³ W
	end

	test â€œmemory literalsâ€ is
		big_endian :â† â¦
			00 01 02 03 04 05 06 07 08 09 0A 0B 0C 0D 0E 0F
			A0 A1 A2 A3 A4 A5 A6 A7 A8 A9 AA AB AC AD AE AF
			F0 F1 F2 F3 F4 F5 F6 F7 F8 F9 FA FB FC FD FE FF
		â¦â‚â‚†
		assert big_endian[3] = (03)â‚â‚†

		little_endian :â† â¦A0A1 A2A3 A4A5 A6A7 A8A9 AAAB ACAD AEAFâ¦â‚â‚†
		assert little_endian[2] = (AAAB)â‚â‚†
	end

	test â€œunitsâ€ is
		x :â† 3 + 4 ôŠ€¢
		y :â† âˆ’3 + 7 ôŠ€¢
		assert x + y = 11 ôŠ€¢

		m :â† 10â€¯000
		lengthâ‚ :â† 10 ôŠ€¤ôŠ€¦
		llengthâ‚‚ :â† m â‹… ôŠ€¦
		assert lâ‚ = lâ‚‚

		pressure :â† 1.2 ôŠ€¤ôŠ€ôŠ€š
		assert pressure = 1200.0 ôŠ€ôŠ€š
	end

	test â€œstring literalsâ€ is
		hello :â† â€œ"Hello"â€ â‹… NL
		assert hello = "\"hello\"\n"

		text :â† Â«
			A string
			spanning more than
			two lines.
		Â»
		assert text = """
			A string \nspanning more than
			two lines.
		"""
	end

	test â€œcharacter literalsâ€ is
		c :â† â€˜Aâ€™
		assert c = U+0041
		null :â† '\0'
		assert null = Ascii.NUL
	end

	test â€œversion literalâ€ is
		versionâ‚ :â† 1.2.99-beta
		versionâ‚‚ :â† 1.2.99
		versionâ‚ƒ :â† 1.2.100
		assert versionâ‚ &lt; versionâ‚‚ &lt; versionâ‚ƒ
	end

	test â€œspecial variablesâ€ is
		ğŸ• := â€œsevenâ€
		assert ğŸ•ğŸ•ğŸ• = â€œsevensevensevenâ€
	end

	test â€œfile path literalsâ€ is
		home_directory :â† âˆ¼/
		config_directory :â† ./config/
		assert home_directory / config_directory = âˆ¼/config/

		app_support :â† ./app//support/
		relative_path :â† ../â€¥/â€¥/x.txt
		assert app_support / relative_path = ./app/x.txt
	end

	test â€œsymbolsâ€ is
		enum Suit â‰¡ {â™£, â™ , â™¡, â™¢}
		assert â™¡.ord() = 3
	end

	test â€œconstant namesâ€ is
		enum TestName â‰¡ {SIMPLE, UNDER_LINE, 3D, 3_D}
		t :â† TestName.arb()
		flag :â† TRUE
		assert flag â©‘ t âˆˆ TestName
	end

	test â€œlabel symbolsâ€ is
		i :â† 10
		n :â† 0
	â‘ :
		n â† n + 1
		i â† i âˆ’ 1
		unless i > 0 then
			goto â‘ â†‘
		end
		assert i = 0
		assert n = 10
	end

	test â€œlabelsâ€ is
		sum :â† 0
		n :â† 100
		NAMED_LOOP: for x âˆˆ âŸ¨1, â€¦, nâŸ© do
			sum â† sum + xÂ²
			if âŸ¦improbableâŸ§ sum â‰¥ 100 then
				break NAMED_LOOP
			end
		end
		assert sum â‰¥ 100
	end

	test â€œIP address literalsâ€ is
		ip4_address :â† [127.0.0.1]
		assert ip4_address = [::ffff:7f00:1]
		assert [::ffff:7f00:1] = [0:0:0:0:0:ffff:7f00:0001]
		assert [::ffff:7f00:1] = [0000:0000:0000:0000:0000:ffff:7f00:0001]
	end

	âŸ¦cacheâŸ§
	function fib(n : â„•â‚ƒâ‚‚) â†’ â„• is
	â—¼ 0, 1:
		return 1
	â—¼ :
		return fib(n âˆ’ 1) + fib(n âˆ’ 2)
	end

	âŸ¦privateâŸ§
	object Person(name : ğ•Š, first_name : ğ•Š)

	âŸ¦privateâŸ§
	âŸ¦negates(notEqual)âŸ§
	function equal(pâ‚ : Person, pâ‚‚ : Person) â†’ ğ”¹ is
		return pâ‚.name() = pâ‚‚.name() â©‘ pâ‚.firstName() = pâ‚‚.firstName()
	end

	âŸ¦privateâŸ§
	âŸ¦negates(equal)âŸ§
	function notEqual(pâ‚ : Person, pâ‚‚ : Person) â†’ ğ”¹ is
		return Â¬equal(pâ‚, pâ‚‚)
	end

	function toString(p : Person, â€œsâ€ : StringBuilderôŠ‹‘ = NIL, â€œneeds_spaceâ€ : ğ”¹ = TRUE) â†’ ğ•Š is
		if s = NIL then
			s â† StringBuilder()
		end
		s.append(p.name())
		s.append(â€œ,â€)
		if needs_space then
			s.append(â€œ â€)
		end
		s.append(p.firstName())
		return s.done()
	end

	âŸ¦privateâŸ§
	function sum(âŸ¦varargsâŸ§ s : â„•â‚ƒôŠ‹â‚‚ as ArrayâŸ¦â„•â‚ƒâ‚‚âŸ§) â†’ â„•â‚ƒâ‚‚ requires {âˆ£sâˆ£ â‰  0} is
		THRESHOLD := 10
		n :â† âˆ£sâˆ£
		if n â‰¤ THRESHOLD then
			return âˆ‘s
		end
		k :â† n Ã· 2
		return âˆ‘[1 â‰¤ i â‰¤ k] s[i] + spawn âˆ‘[k &lt; i â‰¤ n] s[i]
	end

	test â€œfunction callâ€ is
		assert sum(1, 2, 3, 4, 5, 6, 7, 8, 9, 10) = 55
		assert sum(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15) = 120
		p :â† Person(â€œClouseauâ€, â€œJacquesâ€)
		assert toString(p) =  â€œClouseau, Jacquesâ€
		assert toString(p, needs_space: FALSE) =  â€œClouseau,Jacquesâ€
	end

	âŒâ€Œ[[[
		test â€œfailing testâ€ âŒ
			This test will fail.
		â is
			assert FALSE
		end
	]]]â€Œâ

end test
